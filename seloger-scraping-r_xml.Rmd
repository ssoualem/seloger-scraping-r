---
title: "Scraping SeLoger.com with R"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## TBD



```{r}
source("seloger_api.R")
```

## TODO : RMD scripts parameters
```{r}

```





## TODO : pipe output to log_file

```{r}
data_dir <- "data"
log_dir <- "log"
if(!dir.exists(data_dir)) {
  dir.create(data_dir)  
}
if(!dir.exists(log_dir)) {
  dir.create(log_dir)
}

# Date formatting options in ?strptime
ts <- format(Sys.time(), "%Y%m%d-%H%M%S") %>% as.character()
rent_75_fname <- file.path(data_dir, paste0("rent_75_", ts, ".Rds"))
rent_75_log <- file.path(log_dir, paste0("rent_75_", ts, ".log"))

sink(rent_75_log)
rent_75 <- system.time(get_all_listing_df(postal_cd = 75, search_type = "rent", verbose = TRUE))
saveRDS(rent_75, rent_75_fname)
sink()


```


## TODO : cleanup data (NA, "", etc.) in separate function
```{r}
# TODO : convert <NA> and blanks to same value at the end (value TBD)

```

## TODO : move functions and constants to separate files